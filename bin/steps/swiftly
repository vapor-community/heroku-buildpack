export SWIFTLY_HOME_DIR="$CACHE_DIR/$STACK/share/swiftly"
export SWIFTLY_BIN_DIR="$CACHE_DIR/$STACK/bin"
export PATH="$SWIFTLY_BIN_DIR:$PATH"

if [ -d "$SWIFTLY_HOME_DIR" ]; then
  puts-step "Swiftly already installed"
else
  puts-step Installing swiftly...

  curl -L -o swiftly-install.sh https://swiftlang.github.io/swiftly/swiftly-install.sh
  chmod a+x swiftly-install.sh
  ./swiftly-install.sh --disable-confirmation --no-modify-profile --no-install-system-deps </dev/null
fi

puts-step Installing Swift...
swiftly install $SWIFT_VERSION
echo y | swiftly use $SWIFT_VERSION
